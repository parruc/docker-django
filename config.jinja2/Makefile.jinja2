dependencies:
	sudo apt install python3 python3-dev python3-virtualenv postgresql nodejs npm

node:
	cd project/{{ projectname }}/layout; npm install; cd ..

migrations:
	docker-compose exec django ../bin/python manage.py makemigrations --noinput

migrate:
	docker-compose exec django ../bin/python manage.py migrate --noinput

messages:
	docker-compose exec django ../bin/python manage.py makemessages -a
	docker-compose exec django ../bin/python manage.py compilemessages
	docker-compose restart django

theme:
	cd project/{{ projectname }}/layout; npm run build; cd ..
	docker-compose exec django ../bin/python manage.py collectstatic --noinput

theme_dev:
	cd project/{{ projectname }}/layout; npm run dev; cd ..
	docker-compose exec django ../bin/python manage.py collectstatic --noinput -l
	cd project/{{ projectname }}/layout; npm run watch; cd ..
